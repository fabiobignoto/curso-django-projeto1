{% extends "global/base.html" %}

{% block title %} Dashboard {{ user }} | {% endblock title %}

{% block content %}

    <div class="main-content container center">
        <h2 class='mt-medium'> Dashboard {{ user }}</h2>

        {% include "global/partials/messages.html" %}

        <form class='user-form' action="{% url "authors:logout" %}" method='POST'>
            {% csrf_token %}
            <input type="hidden" name="username" value="{{request.user.username}}">
            <a href="{% url "authors:dashboard_recipe_new" %}">Create new recipe</a>
            <button class="plaintext-button" type="submit">Click here to Logout</button>
        </form>
        
        <div class='authors-dashboard-container'>
            <h3>Your Recipes</h3>

            <ul class="authors-dashboard-list">
                {% for recipe in recipes %}
                    <li class='authors-dashboard-list-item'>
                        <form 
                        class='inline-form form-delete'
                        action="{% url "authors:dashboard_delete_recipe" %}"
                        method='POST'>
                            <input type="hidden" name="id" value="{{recipe.id}}">
                            {% csrf_token %}
                            <button type='submit' class='plaintext-button'>
                                <i class="fa-solid fa-xmark"></i>
                            </button>
                        </form>
                        <a href="{% url "authors:dashboard_recipe" recipe.id%}"> {{ recipe }}</a>
                    </li>

                {%empty%}
                    You don't have unpublished recipes.
                {% endfor %}
            </ul>
        </div>

    </div>

{% endblock content %}